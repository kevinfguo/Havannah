angular.module("myApp",[]).factory("gameLogic",function(){function a(a){var b,c;for(b=0;15>b;++b)for(c=o[b][0];c<o[b][1];++c)if(""===a[b][c])return!1;return!0}function b(b,e,f,g){if(void 0===b&&(b=d()),""!==b[e][f])throw new Error("One can only make a move in an empty position!");var h=angular.copy(b);h[e][f]=0===g?"R":"B";var i,j=c(h,e,f,g);return i=""!==j||a(h)?{endMatch:{endMatchScores:"R"===j?[1,0]:"B"===j?[0,1]:[0,0]}}:{setTurn:{turnIndex:1-g}},[i,{set:{key:"board",value:h}},{set:{key:"delta",value:{row:e,col:f}}}]}function c(a,b,c){if(1==f(a,b,c)||1==g(a,b,c)||1==h(a,b,c)){if("B"==a[b][c])return"B";if("R"==a[b][c])return"R"}return""}function d(){var a,b,c=new Array(14);for(a=0;15>a;++a)for(c[a]=new Array(14),b=o[a][0];b<o[a][1];++b)c[a][b]="";return c}function e(a){var c=a.move,d=a.turnIndexBeforeMove,e=a.stateBeforeMove;try{var f=c[2].set.value,g=f.row,h=f.col,i=e.board,j=b(i,g,h,d);if(!m(g,h))return!1;if(!angular.equals(c,j))return!1}catch(k){return!1}return!0}function f(a,b,c){var d=j(a,b,c),e=0;for(var f in d){var g=f.split(",");for(k=0;k<7;k++)angular.equals(g,v[k])&&e++}return e>1?!0:!1}function g(a,b,c){var d=j(a,b,c),e=0,f=0,g=0,h=0,i=0,l=0,m=0;for(var n in d){var o=n.split(",");for(k=0;k<6;k++)angular.equals(o,p[k])&&(e=1),angular.equals(o,q[k])&&(f=1),angular.equals(o,r[k])&&(g=1),angular.equals(o,s[k])&&(h=1),angular.equals(o,t[k])&&(i=1),angular.equals(o,u[k])&&(l=1)}return m=e+f+g+h+i+l,3==m?!0:!1}function h(a,b,c){var d=j(a,b,c),e=l(a,b,c),f=0,g=0;for(var h in d)f++;if(f>5)for(var h in d)for(nbr_cell in e)if(angular.equals(d[h],e[nbr_cell])&&(g++,2==g))return!0;return!1}function i(a,b,c){var d=[];d.push([b,c]);var e=[];for(e[[b,c]]=[[-1],[-1]];d.length>0;){var f=d.shift(),g=l(a,f[0],f[1]);for(var h in g)g[h]in e==0?(d.push(g[h]),e[g[h]]=g[h]):e[g[h]]===[[-1],[-1]]&&(d.push(g[h]),e[g[h]]=g[h])}return e}function j(a,b,c){var d=[];d.push([b,c]);var e=[];for(e[[b,c]]=[[b],[c]];d.length>0;){var f=d.shift(),g=l(a,f[0],f[1]);for(var h in g)g[h]in e==0&&(d.push(g[h]),e[g[h]]=g[h])}return e}function l(a,b,c){var d=[];return m(b-1,c)&&""!=a[b-1][c]&&a[b-1][c]===a[b][c]&&d.push([b-1,c]),m(b-1,c-1)&&""!=a[b-1][c-1]&&a[b-1][c-1]===a[b][c]&&d.push([b-1,c-1]),m(b,c-1)&&""!=a[b][c-1]&&a[b][c-1]==a[b][c]&&d.push([b,c-1]),m(b,c+1)&&""!=a[b][c+1]&&a[b][c+1]==a[b][c]&&d.push([b,c+1]),m(b+1,c+1)&&""!=a[b+1][c+1]&&a[b+1][c+1]==a[b][c]&&d.push([b+1,c+1]),m(b+1,c)&&""!=a[b+1][c]&&a[b+1][c]==a[b][c]&&d.push([b+1,c]),d}function m(a,b){return a>-1&&15>a&&b>-1&&15>b&&b>o[a][0]-1&&b<o[a][1]?!0:!1}function n(a,c){var d,e,f=[];for(d=0;15>d;++d)for(e=o[d][0];e<o[d][1];++e)try{f.push(b(a,d,e,c))}catch(g){}return f}var o=[[0,8],[0,9],[0,10],[0,11],[0,12],[0,13],[0,14],[0,15],[1,15],[2,15],[3,15],[4,15],[5,15],[6,15],[7,15]],p=[["0","1"],["0","2"],["0","3"],["0","4"],["0","5"],["0","6"]],q=[["1","8"],["2","9"],["3","10"],["4","11"],["5","12"],["6","13"]],r=[["8","14"],["9","14"],["10","14"],["11","14"],["12","14"],["13","14"]],s=[["14","8"],["14","9"],["14","10"],["14","11"],["14","12"],["14","13"]],t=[["8","1"],["9","2"],["10","3"],["11","4"],["12","5"],["13","6"]],u=[["1","14"],["2","14"],["3","14"],["4","14"],["5","14"],["6","14"]],v=[["0","0"],["0","7"],["7","14"],["14","14"],["14","7"],["7","0"]];return{getPossibleMoves:n,setBoard:d,createMove:b,isMoveOk:e,isTie:a,isInsideBoard:m,getConnectedPath:j,getConnectedPathForRing:i,getNeighborsWithSameColor:l,getBridgeWin:f,getForkWin:g,getRingWin:h,getWinner:c}}),angular.module("myApp").controller("Ctrl",["$scope","$rootScope","$log","$timeout","gameService","stateService","gameLogic","resizeGameAreaService",function(a,b,c,d,e,f,g,h){"use strict";function i(a,b,c){var d=b-s.offsetLeft,e=c-s.offsetTop;if(console.log(d,e,b,c,s.clientWidth,s.clientHeight),0>d||0>e||d>=s.clientWidth||e>=s.clientHeight)return void(p.style.display="none");var f=[[0,8],[0,9],[0,10],[0,11],[0,12],[0,13],[0,14],[0,15],[1,15],[2,15],[3,15],[4,15],[5,15],[6,15],[7,15]];p.style.display="inline";var g=Math.floor(t*e/s.clientHeight),h=Math.floor(u*d/s.clientWidth),i=l(g,h);console.log(i,g,h),r.setAttribute("x1",i.x),r.setAttribute("x2",i.x),q.setAttribute("y1",i.y),q.setAttribute("y2",i.y);k(g,h);(0==g||1==g)&&(h-=3),(2==g||3==g)&&(h-=2),(4==g||5==g)&&(h-=1),(8==g||9==g)&&(h+=1),(10==g||11==g)&&(h+=2),(12==g||13==g)&&(h+=3),14==g&&(h+=4),g>-1&&15>g&&(h>f[g][0]-1&&h<f[g][1]||(p.style.display="none")),("touchend"===a||"touchcancel"===a||"touchleave"===a||"mouseup"===a)&&(p.style.display="none",o(g,h))}function j(){return{width:t%2==0?s.clientWidth/u-u*x/2:s.clientWidth/u,height:t%2==0?s.clientHeight/t-t*y/2:s.clientHeight/t}}function k(a,b){var c=j();return{top:a*c.height,left:b*c.width}}function l(a,b){var c=j();return{x:b*c.width+c.width/2,y:a*c.height+c.height/2}}function m(){var b=g.getPossibleMoves(a.board,a.turnIndex);console.log("Possible Moves=",b);var c=Math.floor(Math.random()*b.length);console.log("random move=",b[c]),e.makeMove(b[c])}function n(b){a.board=b.stateAfterMove.board;b.move;void 0===a.board&&(a.board=g.setBoard()),a.isYourTurn=b.turnIndexAfterMove>=0&&b.yourPlayerIndex===b.turnIndexAfterMove,a.turnIndex=b.turnIndexAfterMove,a.isYourTurn&&""===b.playersInfo[b.yourPlayerIndex].playerId&&(console.log("computer turn"),a.isYourTurn=!1,d(m,500))}function o(d,e){b.$apply(function(){var b="Dragged to "+d+"x"+e;c.info(b),a.msg=b,a.cellClicked(d,e)})}h.setWidthToHeight(1),a.numbersTo=function(a,b){for(var c=[],d=a;b>d;d++)c[d]=d;return c},a.getStyle=function(b,c){var d=a.board[b][c];return"R"===d?{"-webkit-animation":"moveAnimation 2s",animation:"moveAnimation 2s"}:"B"===d?{"-webkit-animation":"moveAnimation 2s",animation:"moveAnimation 2s"}:{}};var p=document.getElementById("draggingLines"),q=document.getElementById("horizontalDraggingLine"),r=document.getElementById("verticalDraggingLine"),s=document.getElementById("gameArea"),t=15,u=15;window.handleDragEvent=i,a.cellClicked=function(b,d){if(c.info(["Clicked on cell:",b,d]),"?throwException"===window.location.search)throw new Error("Throwing the error because URL has '?throwException'");if(a.isYourTurn)try{var f=g.createMove(a.board,b,d,a.turnIndex);a.isYourTurn=!1,e.makeMove(f)}catch(h){return void c.info(["Cell is already full in position:",b,d,h])}},a.shouldShowImage=function(b,c){var d=a.board[b][c];return""!==d},a.isPieceR=function(b,c){return"R"===a.board[b][c]},a.isPieceB=function(b,c){return"B"===a.board[b][c]},a.getImageSrc=function(b,c){var d=a.board[b][c];return"R"===d?"imgs/R.png":"B"===d?"imgs/B.gif":""},a.shouldSlowlyAppear=function(b,c){return void 0!==a.delta&&a.delta.row===b&&a.delta.col===c},e.setGame({gameDeveloperEmail:"sm5119@nyu.edu",minNumberOfPlayers:2,maxNumberOfPlayers:2,isMoveOk:g.isMoveOk,updateUI:n})}]),angular.module("myApp").factory("aiService",["alphaBetaService","gameLogic",function(a,b){"use strict";function c(b,c,g){return a.alphaBetaDecision([null,{set:{key:"board",value:b}}],c,e,d,"?debug"===window.location.search?f:null,g)}function d(a){if(a[0].endMatch){var b=a[0].endMatch.endMatchScores;return b[0]>b[1]?Number.POSITIVE_INFINITY:b[0]<b[1]?Number.NEGATIVE_INFINITY:0}return 0}function e(a,c){return b.getPossibleMoves(a[1].set.value,c)}function f(a){return"\n"+a[1].set.value.join("\n")+"\n"}return{createComputerMove:c}}]);
//# sourceMappingURL=everything.min.js.map